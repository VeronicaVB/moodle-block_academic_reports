function asyncGeneratorStep(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}if(h.done){b(i)}else{Promise.resolve(i).then(d,e)}}function _asyncToGenerator(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var h=a.apply(b,c);function f(a){asyncGeneratorStep(h,d,e,f,g,"next",a)}function g(a){asyncGeneratorStep(h,d,e,f,g,"throw",a)}f(void 0)})}}define ("block_academic_reports/controls",["jquery","core/ajax","core/log","core/pubsub"],function(a,b,c,d){'use strict';function e(){c.debug("block_academic_reports: initializing controls");this}e.prototype.main=function(){var b=this;b.setupEvents();b.setPosition();d.subscribe("nav-drawer-toggle-end",function(){c.debug("resizing block_academic_reports");if(a("#nav-drawer").hasClass("closed")){a("table.table.table-striped.table-wrapper-scroll-y.my-custom-scrollbar").css("height","140px")}else{a("table.table.table-striped.table-wrapper-scroll-y.my-custom-scrollbar").css("height","185px")}})};e.prototype.setPosition=function(){if(0==a(".block_grades_effort_report").length){return}a("section.block.block_academic_reports.card.mb-3").css("top",function(){var b=a(".block_grades_effort_report").outerHeight(!0),c=a(".block_grades_effort_report").position(),d=b+c.top,e=d.toString()+"px";return e})};e.prototype.setupEvents=function(){var b=this;a(".view-report").on("click",function(c){var d=a(c.target).data().tdss;b.displayReportService(d)})};e.prototype.displayReportService=function(a){var d=this;b.call([{methodname:"block_academic_reports_get_student_report",args:{tdocumentsseq:a},done:function done(a){var b=JSON.parse(a.blob);d.displayReport(b)},fail:function fail(a){c.error("block_academic_report_get_student_report: Unable to get blob.");c.debug(a)}}])};e.prototype.displayReport=function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(b){var c,d,e;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:a.next=2;return fetch("data:application/pdf;base64,".concat(b));case 2:c=a.sent;a.next=5;return c.blob();case 5:d=a.sent;e=URL.createObjectURL(d);window.open(e);case 8:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}();return{init:function(){var a=new e;a.main()}}});
//# sourceMappingURL=controls.min.js.map
